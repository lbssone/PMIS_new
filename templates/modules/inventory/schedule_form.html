{% extends 'base/layout.html' %}

{% block main %}

<form action="{% url 'inventory:schedule_form' %}" method="POST">{% csrf_token %}
    <input id="date" type="date" name="date">
    <select name="umbrella">
        <option value="抗UV直傘">抗UV直傘</option>
        <option value="防風直傘">防風直傘</option>
        <option value="輕量直傘">輕量直傘</option>
    </select>
    {% comment %} <label for="number">抗UV直傘:</label> {% endcomment %}
    <input type="text" id="num" name="num_of_umbrella">
    <button type="submit">送出</button>
</form>
<br>
<br>
{% if component_tree_list %}
    {% comment %} {% for item in component_number_list %}
        <p>{{ item.0 }}: {{ item.1 }}</p>
    {% endfor %} {% endcomment %}
    <p>{{ date }} {{ name }} {{ num }}支</p>
    <div style="display:block" class="tree">
        <ul>
            <li>
            <a href="#">{{ name }}</a>
                <ul>
                {% for item in component_tree_list %}
                    <li>
                        <a href="#">{{ item.0 }}: {{ item.1 }}單位&nbsp;&nbsp;&nbsp;單位重量: {{item.2}}g</a>
                    </li>
                {% endfor %}
            </li>
        </ul>
    </div>
    
    <div style="clear: left; padding-top:50px;">
        {% for item in component_tree_list %}
            <p>{{ item.0.name }}: {{ item.1 }}單位 存貨: {{ item.0.inventory }}單位 {% if item.2 > 0 %}不足: {{ item.2 }}單位 應於 {{ item.3 }} 生產 {% else %}存貨充足{% endif %}</p> 
        {% endfor %}
    </div>
    <br>
    <button class="ui red button" onclick="displayMaterial()">檢查原物料存貨</button>
    <div style="clear: left; padding-top:20px; display:none;" id="material">
        <p>{{ material_list.0 }}: {{ plastic }}g 存貨: {{ material_list.0.inventory }}g 不足: {{ p_quan }}g</p> 
        <p>{{ material_list.1 }}: {{ frp }}g 存貨: {{ material_list.1.inventory }}g 不足: {{ frp_quan }}g</p>
        <p>{{ material_list.2 }}: {{ fabric }}g 存貨: {{ material_list.2.inventory }}g 不足: {{ fabric_quan }}g</p>
    </div>
{% endif %}

{% endblock %}